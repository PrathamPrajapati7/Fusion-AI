"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/agentkeepalive";
exports.ids = ["vendor-chunks/agentkeepalive"];
exports.modules = {

/***/ "(rsc)/./node_modules/agentkeepalive/index.js":
/*!**********************************************!*\
  !*** ./node_modules/agentkeepalive/index.js ***!
  \**********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\r\n\r\nmodule.exports = __webpack_require__(/*! ./lib/agent */ \"(rsc)/./node_modules/agentkeepalive/lib/agent.js\");\r\nmodule.exports.HttpsAgent = __webpack_require__(/*! ./lib/https_agent */ \"(rsc)/./node_modules/agentkeepalive/lib/https_agent.js\");\r\nmodule.exports.constants = __webpack_require__(/*! ./lib/constants */ \"(rsc)/./node_modules/agentkeepalive/lib/constants.js\");\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYWdlbnRrZWVwYWxpdmUvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDJHQUF1QztBQUN2QyxrSUFBd0Q7QUFDeEQsNkhBQXFEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnVzaW9uLWFpLy4vbm9kZV9tb2R1bGVzL2FnZW50a2VlcGFsaXZlL2luZGV4LmpzPzk5MmQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9hZ2VudCcpO1xyXG5tb2R1bGUuZXhwb3J0cy5IdHRwc0FnZW50ID0gcmVxdWlyZSgnLi9saWIvaHR0cHNfYWdlbnQnKTtcclxubW9kdWxlLmV4cG9ydHMuY29uc3RhbnRzID0gcmVxdWlyZSgnLi9saWIvY29uc3RhbnRzJyk7XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/agentkeepalive/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/agentkeepalive/lib/agent.js":
/*!**************************************************!*\
  !*** ./node_modules/agentkeepalive/lib/agent.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\r\n\r\nconst OriginalAgent = (__webpack_require__(/*! http */ \"http\").Agent);\r\nconst ms = __webpack_require__(/*! humanize-ms */ \"(rsc)/./node_modules/humanize-ms/index.js\");\r\nconst debug = (__webpack_require__(/*! util */ \"util\").debuglog)('agentkeepalive');\r\nconst {\r\n  INIT_SOCKET,\r\n  CURRENT_ID,\r\n  CREATE_ID,\r\n  SOCKET_CREATED_TIME,\r\n  SOCKET_NAME,\r\n  SOCKET_REQUEST_COUNT,\r\n  SOCKET_REQUEST_FINISHED_COUNT,\r\n} = __webpack_require__(/*! ./constants */ \"(rsc)/./node_modules/agentkeepalive/lib/constants.js\");\r\n\r\n// OriginalAgent come from\r\n// - https://github.com/nodejs/node/blob/v8.12.0/lib/_http_agent.js\r\n// - https://github.com/nodejs/node/blob/v10.12.0/lib/_http_agent.js\r\n\r\n// node <= 10\r\nlet defaultTimeoutListenerCount = 1;\r\nconst majorVersion = parseInt(process.version.split('.', 1)[0].substring(1));\r\nif (majorVersion >= 11 && majorVersion <= 12) {\r\n  defaultTimeoutListenerCount = 2;\r\n} else if (majorVersion >= 13) {\r\n  defaultTimeoutListenerCount = 3;\r\n}\r\n\r\nfunction deprecate(message) {\r\n  console.log('[agentkeepalive:deprecated] %s', message);\r\n}\r\n\r\nclass Agent extends OriginalAgent {\r\n  constructor(options) {\r\n    options = options || {};\r\n    options.keepAlive = options.keepAlive !== false;\r\n    // default is keep-alive and 4s free socket timeout\r\n    // see https://medium.com/ssense-tech/reduce-networking-errors-in-nodejs-23b4eb9f2d83\r\n    if (options.freeSocketTimeout === undefined) {\r\n      options.freeSocketTimeout = 4000;\r\n    }\r\n    // Legacy API: keepAliveTimeout should be rename to `freeSocketTimeout`\r\n    if (options.keepAliveTimeout) {\r\n      deprecate('options.keepAliveTimeout is deprecated, please use options.freeSocketTimeout instead');\r\n      options.freeSocketTimeout = options.keepAliveTimeout;\r\n      delete options.keepAliveTimeout;\r\n    }\r\n    // Legacy API: freeSocketKeepAliveTimeout should be rename to `freeSocketTimeout`\r\n    if (options.freeSocketKeepAliveTimeout) {\r\n      deprecate('options.freeSocketKeepAliveTimeout is deprecated, please use options.freeSocketTimeout instead');\r\n      options.freeSocketTimeout = options.freeSocketKeepAliveTimeout;\r\n      delete options.freeSocketKeepAliveTimeout;\r\n    }\r\n\r\n    // Sets the socket to timeout after timeout milliseconds of inactivity on the socket.\r\n    // By default is double free socket timeout.\r\n    if (options.timeout === undefined) {\r\n      // make sure socket default inactivity timeout >= 8s\r\n      options.timeout = Math.max(options.freeSocketTimeout * 2, 8000);\r\n    }\r\n\r\n    // support humanize format\r\n    options.timeout = ms(options.timeout);\r\n    options.freeSocketTimeout = ms(options.freeSocketTimeout);\r\n    options.socketActiveTTL = options.socketActiveTTL ? ms(options.socketActiveTTL) : 0;\r\n\r\n    super(options);\r\n\r\n    this[CURRENT_ID] = 0;\r\n\r\n    // create socket success counter\r\n    this.createSocketCount = 0;\r\n    this.createSocketCountLastCheck = 0;\r\n\r\n    this.createSocketErrorCount = 0;\r\n    this.createSocketErrorCountLastCheck = 0;\r\n\r\n    this.closeSocketCount = 0;\r\n    this.closeSocketCountLastCheck = 0;\r\n\r\n    // socket error event count\r\n    this.errorSocketCount = 0;\r\n    this.errorSocketCountLastCheck = 0;\r\n\r\n    // request finished counter\r\n    this.requestCount = 0;\r\n    this.requestCountLastCheck = 0;\r\n\r\n    // including free socket timeout counter\r\n    this.timeoutSocketCount = 0;\r\n    this.timeoutSocketCountLastCheck = 0;\r\n\r\n    this.on('free', socket => {\r\n      // https://github.com/nodejs/node/pull/32000\r\n      // Node.js native agent will check socket timeout eqs agent.options.timeout.\r\n      // Use the ttl or freeSocketTimeout to overwrite.\r\n      const timeout = this.calcSocketTimeout(socket);\r\n      if (timeout > 0 && socket.timeout !== timeout) {\r\n        socket.setTimeout(timeout);\r\n      }\r\n    });\r\n  }\r\n\r\n  get freeSocketKeepAliveTimeout() {\r\n    deprecate('agent.freeSocketKeepAliveTimeout is deprecated, please use agent.options.freeSocketTimeout instead');\r\n    return this.options.freeSocketTimeout;\r\n  }\r\n\r\n  get timeout() {\r\n    deprecate('agent.timeout is deprecated, please use agent.options.timeout instead');\r\n    return this.options.timeout;\r\n  }\r\n\r\n  get socketActiveTTL() {\r\n    deprecate('agent.socketActiveTTL is deprecated, please use agent.options.socketActiveTTL instead');\r\n    return this.options.socketActiveTTL;\r\n  }\r\n\r\n  calcSocketTimeout(socket) {\r\n    /**\r\n     * return <= 0: should free socket\r\n     * return > 0: should update socket timeout\r\n     * return undefined: not find custom timeout\r\n     */\r\n    let freeSocketTimeout = this.options.freeSocketTimeout;\r\n    const socketActiveTTL = this.options.socketActiveTTL;\r\n    if (socketActiveTTL) {\r\n      // check socketActiveTTL\r\n      const aliveTime = Date.now() - socket[SOCKET_CREATED_TIME];\r\n      const diff = socketActiveTTL - aliveTime;\r\n      if (diff <= 0) {\r\n        return diff;\r\n      }\r\n      if (freeSocketTimeout && diff < freeSocketTimeout) {\r\n        freeSocketTimeout = diff;\r\n      }\r\n    }\r\n    // set freeSocketTimeout\r\n    if (freeSocketTimeout) {\r\n      // set free keepalive timer\r\n      // try to use socket custom freeSocketTimeout first, support headers['keep-alive']\r\n      // https://github.com/node-modules/urllib/blob/b76053020923f4d99a1c93cf2e16e0c5ba10bacf/lib/urllib.js#L498\r\n      const customFreeSocketTimeout = socket.freeSocketTimeout || socket.freeSocketKeepAliveTimeout;\r\n      return customFreeSocketTimeout || freeSocketTimeout;\r\n    }\r\n  }\r\n\r\n  keepSocketAlive(socket) {\r\n    const result = super.keepSocketAlive(socket);\r\n    // should not keepAlive, do nothing\r\n    if (!result) return result;\r\n\r\n    const customTimeout = this.calcSocketTimeout(socket);\r\n    if (typeof customTimeout === 'undefined') {\r\n      return true;\r\n    }\r\n    if (customTimeout <= 0) {\r\n      debug('%s(requests: %s, finished: %s) free but need to destroy by TTL, request count %s, diff is %s',\r\n        socket[SOCKET_NAME], socket[SOCKET_REQUEST_COUNT], socket[SOCKET_REQUEST_FINISHED_COUNT], customTimeout);\r\n      return false;\r\n    }\r\n    if (socket.timeout !== customTimeout) {\r\n      socket.setTimeout(customTimeout);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // only call on addRequest\r\n  reuseSocket(...args) {\r\n    // reuseSocket(socket, req)\r\n    super.reuseSocket(...args);\r\n    const socket = args[0];\r\n    const req = args[1];\r\n    req.reusedSocket = true;\r\n    const agentTimeout = this.options.timeout;\r\n    if (getSocketTimeout(socket) !== agentTimeout) {\r\n      // reset timeout before use\r\n      socket.setTimeout(agentTimeout);\r\n      debug('%s reset timeout to %sms', socket[SOCKET_NAME], agentTimeout);\r\n    }\r\n    socket[SOCKET_REQUEST_COUNT]++;\r\n    debug('%s(requests: %s, finished: %s) reuse on addRequest, timeout %sms',\r\n      socket[SOCKET_NAME], socket[SOCKET_REQUEST_COUNT], socket[SOCKET_REQUEST_FINISHED_COUNT],\r\n      getSocketTimeout(socket));\r\n  }\r\n\r\n  [CREATE_ID]() {\r\n    const id = this[CURRENT_ID]++;\r\n    if (this[CURRENT_ID] === Number.MAX_SAFE_INTEGER) this[CURRENT_ID] = 0;\r\n    return id;\r\n  }\r\n\r\n  [INIT_SOCKET](socket, options) {\r\n    // bugfix here.\r\n    // https on node 8, 10 won't set agent.options.timeout by default\r\n    // TODO: need to fix on node itself\r\n    if (options.timeout) {\r\n      const timeout = getSocketTimeout(socket);\r\n      if (!timeout) {\r\n        socket.setTimeout(options.timeout);\r\n      }\r\n    }\r\n\r\n    if (this.options.keepAlive) {\r\n      // Disable Nagle's algorithm: http://blog.caustik.com/2012/04/08/scaling-node-js-to-100k-concurrent-connections/\r\n      // https://fengmk2.com/benchmark/nagle-algorithm-delayed-ack-mock.html\r\n      socket.setNoDelay(true);\r\n    }\r\n    this.createSocketCount++;\r\n    if (this.options.socketActiveTTL) {\r\n      socket[SOCKET_CREATED_TIME] = Date.now();\r\n    }\r\n    // don't show the hole '-----BEGIN CERTIFICATE----' key string\r\n    socket[SOCKET_NAME] = `sock[${this[CREATE_ID]()}#${options._agentKey}]`.split('-----BEGIN', 1)[0];\r\n    socket[SOCKET_REQUEST_COUNT] = 1;\r\n    socket[SOCKET_REQUEST_FINISHED_COUNT] = 0;\r\n    installListeners(this, socket, options);\r\n  }\r\n\r\n  createConnection(options, oncreate) {\r\n    let called = false;\r\n    const onNewCreate = (err, socket) => {\r\n      if (called) return;\r\n      called = true;\r\n\r\n      if (err) {\r\n        this.createSocketErrorCount++;\r\n        return oncreate(err);\r\n      }\r\n      this[INIT_SOCKET](socket, options);\r\n      oncreate(err, socket);\r\n    };\r\n\r\n    const newSocket = super.createConnection(options, onNewCreate);\r\n    if (newSocket) onNewCreate(null, newSocket);\r\n    return newSocket;\r\n  }\r\n\r\n  get statusChanged() {\r\n    const changed = this.createSocketCount !== this.createSocketCountLastCheck ||\r\n      this.createSocketErrorCount !== this.createSocketErrorCountLastCheck ||\r\n      this.closeSocketCount !== this.closeSocketCountLastCheck ||\r\n      this.errorSocketCount !== this.errorSocketCountLastCheck ||\r\n      this.timeoutSocketCount !== this.timeoutSocketCountLastCheck ||\r\n      this.requestCount !== this.requestCountLastCheck;\r\n    if (changed) {\r\n      this.createSocketCountLastCheck = this.createSocketCount;\r\n      this.createSocketErrorCountLastCheck = this.createSocketErrorCount;\r\n      this.closeSocketCountLastCheck = this.closeSocketCount;\r\n      this.errorSocketCountLastCheck = this.errorSocketCount;\r\n      this.timeoutSocketCountLastCheck = this.timeoutSocketCount;\r\n      this.requestCountLastCheck = this.requestCount;\r\n    }\r\n    return changed;\r\n  }\r\n\r\n  getCurrentStatus() {\r\n    return {\r\n      createSocketCount: this.createSocketCount,\r\n      createSocketErrorCount: this.createSocketErrorCount,\r\n      closeSocketCount: this.closeSocketCount,\r\n      errorSocketCount: this.errorSocketCount,\r\n      timeoutSocketCount: this.timeoutSocketCount,\r\n      requestCount: this.requestCount,\r\n      freeSockets: inspect(this.freeSockets),\r\n      sockets: inspect(this.sockets),\r\n      requests: inspect(this.requests),\r\n    };\r\n  }\r\n}\r\n\r\n// node 8 don't has timeout attribute on socket\r\n// https://github.com/nodejs/node/pull/21204/files#diff-e6ef024c3775d787c38487a6309e491dR408\r\nfunction getSocketTimeout(socket) {\r\n  return socket.timeout || socket._idleTimeout;\r\n}\r\n\r\nfunction installListeners(agent, socket, options) {\r\n  debug('%s create, timeout %sms', socket[SOCKET_NAME], getSocketTimeout(socket));\r\n\r\n  // listener socket events: close, timeout, error, free\r\n  function onFree() {\r\n    // create and socket.emit('free') logic\r\n    // https://github.com/nodejs/node/blob/master/lib/_http_agent.js#L311\r\n    // no req on the socket, it should be the new socket\r\n    if (!socket._httpMessage && socket[SOCKET_REQUEST_COUNT] === 1) return;\r\n\r\n    socket[SOCKET_REQUEST_FINISHED_COUNT]++;\r\n    agent.requestCount++;\r\n    debug('%s(requests: %s, finished: %s) free',\r\n      socket[SOCKET_NAME], socket[SOCKET_REQUEST_COUNT], socket[SOCKET_REQUEST_FINISHED_COUNT]);\r\n\r\n    // should reuse on pedding requests?\r\n    const name = agent.getName(options);\r\n    if (socket.writable && agent.requests[name] && agent.requests[name].length) {\r\n      // will be reuse on agent free listener\r\n      socket[SOCKET_REQUEST_COUNT]++;\r\n      debug('%s(requests: %s, finished: %s) will be reuse on agent free event',\r\n        socket[SOCKET_NAME], socket[SOCKET_REQUEST_COUNT], socket[SOCKET_REQUEST_FINISHED_COUNT]);\r\n    }\r\n  }\r\n  socket.on('free', onFree);\r\n\r\n  function onClose(isError) {\r\n    debug('%s(requests: %s, finished: %s) close, isError: %s',\r\n      socket[SOCKET_NAME], socket[SOCKET_REQUEST_COUNT], socket[SOCKET_REQUEST_FINISHED_COUNT], isError);\r\n    agent.closeSocketCount++;\r\n  }\r\n  socket.on('close', onClose);\r\n\r\n  // start socket timeout handler\r\n  function onTimeout() {\r\n    // onTimeout and emitRequestTimeout(_http_client.js)\r\n    // https://github.com/nodejs/node/blob/v12.x/lib/_http_client.js#L711\r\n    const listenerCount = socket.listeners('timeout').length;\r\n    // node <= 10, default listenerCount is 1, onTimeout\r\n    // 11 < node <= 12, default listenerCount is 2, onTimeout and emitRequestTimeout\r\n    // node >= 13, default listenerCount is 3, onTimeout,\r\n    //   onTimeout(https://github.com/nodejs/node/pull/32000/files#diff-5f7fb0850412c6be189faeddea6c5359R333)\r\n    //   and emitRequestTimeout\r\n    const timeout = getSocketTimeout(socket);\r\n    const req = socket._httpMessage;\r\n    const reqTimeoutListenerCount = req && req.listeners('timeout').length || 0;\r\n    debug('%s(requests: %s, finished: %s) timeout after %sms, listeners %s, defaultTimeoutListenerCount %s, hasHttpRequest %s, HttpRequest timeoutListenerCount %s',\r\n      socket[SOCKET_NAME], socket[SOCKET_REQUEST_COUNT], socket[SOCKET_REQUEST_FINISHED_COUNT],\r\n      timeout, listenerCount, defaultTimeoutListenerCount, !!req, reqTimeoutListenerCount);\r\n    if (debug.enabled) {\r\n      debug('timeout listeners: %s', socket.listeners('timeout').map(f => f.name).join(', '));\r\n    }\r\n    agent.timeoutSocketCount++;\r\n    const name = agent.getName(options);\r\n    if (agent.freeSockets[name] && agent.freeSockets[name].indexOf(socket) !== -1) {\r\n      // free socket timeout, destroy quietly\r\n      socket.destroy();\r\n      // Remove it from freeSockets list immediately to prevent new requests\r\n      // from being sent through this socket.\r\n      agent.removeSocket(socket, options);\r\n      debug('%s is free, destroy quietly', socket[SOCKET_NAME]);\r\n    } else {\r\n      // if there is no any request socket timeout handler,\r\n      // agent need to handle socket timeout itself.\r\n      //\r\n      // custom request socket timeout handle logic must follow these rules:\r\n      //  1. Destroy socket first\r\n      //  2. Must emit socket 'agentRemove' event tell agent remove socket\r\n      //     from freeSockets list immediately.\r\n      //     Otherise you may be get 'socket hang up' error when reuse\r\n      //     free socket and timeout happen in the same time.\r\n      if (reqTimeoutListenerCount === 0) {\r\n        const error = new Error('Socket timeout');\r\n        error.code = 'ERR_SOCKET_TIMEOUT';\r\n        error.timeout = timeout;\r\n        // must manually call socket.end() or socket.destroy() to end the connection.\r\n        // https://nodejs.org/dist/latest-v10.x/docs/api/net.html#net_socket_settimeout_timeout_callback\r\n        socket.destroy(error);\r\n        agent.removeSocket(socket, options);\r\n        debug('%s destroy with timeout error', socket[SOCKET_NAME]);\r\n      }\r\n    }\r\n  }\r\n  socket.on('timeout', onTimeout);\r\n\r\n  function onError(err) {\r\n    const listenerCount = socket.listeners('error').length;\r\n    debug('%s(requests: %s, finished: %s) error: %s, listenerCount: %s',\r\n      socket[SOCKET_NAME], socket[SOCKET_REQUEST_COUNT], socket[SOCKET_REQUEST_FINISHED_COUNT],\r\n      err, listenerCount);\r\n    agent.errorSocketCount++;\r\n    if (listenerCount === 1) {\r\n      // if socket don't contain error event handler, don't catch it, emit it again\r\n      debug('%s emit uncaught error event', socket[SOCKET_NAME]);\r\n      socket.removeListener('error', onError);\r\n      socket.emit('error', err);\r\n    }\r\n  }\r\n  socket.on('error', onError);\r\n\r\n  function onRemove() {\r\n    debug('%s(requests: %s, finished: %s) agentRemove',\r\n      socket[SOCKET_NAME],\r\n      socket[SOCKET_REQUEST_COUNT], socket[SOCKET_REQUEST_FINISHED_COUNT]);\r\n    // We need this function for cases like HTTP 'upgrade'\r\n    // (defined by WebSockets) where we need to remove a socket from the\r\n    // pool because it'll be locked up indefinitely\r\n    socket.removeListener('close', onClose);\r\n    socket.removeListener('error', onError);\r\n    socket.removeListener('free', onFree);\r\n    socket.removeListener('timeout', onTimeout);\r\n    socket.removeListener('agentRemove', onRemove);\r\n  }\r\n  socket.on('agentRemove', onRemove);\r\n}\r\n\r\nmodule.exports = Agent;\r\n\r\nfunction inspect(obj) {\r\n  const res = {};\r\n  for (const key in obj) {\r\n    res[key] = obj[key].length;\r\n  }\r\n  return res;\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYWdlbnRrZWVwYWxpdmUvbGliL2FnZW50LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSxzQkFBc0IsK0NBQXFCO0FBQzNDLFdBQVcsbUJBQU8sQ0FBQyw4REFBYTtBQUNoQyxjQUFjLGtEQUF3QjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxFQUFFLG1CQUFPLENBQUMseUVBQWE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGtCQUFrQixHQUFHLGtCQUFrQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mdXNpb24tYWkvLi9ub2RlX21vZHVsZXMvYWdlbnRrZWVwYWxpdmUvbGliL2FnZW50LmpzPzVhODIiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgT3JpZ2luYWxBZ2VudCA9IHJlcXVpcmUoJ2h0dHAnKS5BZ2VudDtcclxuY29uc3QgbXMgPSByZXF1aXJlKCdodW1hbml6ZS1tcycpO1xyXG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoJ3V0aWwnKS5kZWJ1Z2xvZygnYWdlbnRrZWVwYWxpdmUnKTtcclxuY29uc3Qge1xyXG4gIElOSVRfU09DS0VULFxyXG4gIENVUlJFTlRfSUQsXHJcbiAgQ1JFQVRFX0lELFxyXG4gIFNPQ0tFVF9DUkVBVEVEX1RJTUUsXHJcbiAgU09DS0VUX05BTUUsXHJcbiAgU09DS0VUX1JFUVVFU1RfQ09VTlQsXHJcbiAgU09DS0VUX1JFUVVFU1RfRklOSVNIRURfQ09VTlQsXHJcbn0gPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xyXG5cclxuLy8gT3JpZ2luYWxBZ2VudCBjb21lIGZyb21cclxuLy8gLSBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzL25vZGUvYmxvYi92OC4xMi4wL2xpYi9faHR0cF9hZ2VudC5qc1xyXG4vLyAtIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlanMvbm9kZS9ibG9iL3YxMC4xMi4wL2xpYi9faHR0cF9hZ2VudC5qc1xyXG5cclxuLy8gbm9kZSA8PSAxMFxyXG5sZXQgZGVmYXVsdFRpbWVvdXRMaXN0ZW5lckNvdW50ID0gMTtcclxuY29uc3QgbWFqb3JWZXJzaW9uID0gcGFyc2VJbnQocHJvY2Vzcy52ZXJzaW9uLnNwbGl0KCcuJywgMSlbMF0uc3Vic3RyaW5nKDEpKTtcclxuaWYgKG1ham9yVmVyc2lvbiA+PSAxMSAmJiBtYWpvclZlcnNpb24gPD0gMTIpIHtcclxuICBkZWZhdWx0VGltZW91dExpc3RlbmVyQ291bnQgPSAyO1xyXG59IGVsc2UgaWYgKG1ham9yVmVyc2lvbiA+PSAxMykge1xyXG4gIGRlZmF1bHRUaW1lb3V0TGlzdGVuZXJDb3VudCA9IDM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlcHJlY2F0ZShtZXNzYWdlKSB7XHJcbiAgY29uc29sZS5sb2coJ1thZ2VudGtlZXBhbGl2ZTpkZXByZWNhdGVkXSAlcycsIG1lc3NhZ2UpO1xyXG59XHJcblxyXG5jbGFzcyBBZ2VudCBleHRlbmRzIE9yaWdpbmFsQWdlbnQge1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgb3B0aW9ucy5rZWVwQWxpdmUgPSBvcHRpb25zLmtlZXBBbGl2ZSAhPT0gZmFsc2U7XHJcbiAgICAvLyBkZWZhdWx0IGlzIGtlZXAtYWxpdmUgYW5kIDRzIGZyZWUgc29ja2V0IHRpbWVvdXRcclxuICAgIC8vIHNlZSBodHRwczovL21lZGl1bS5jb20vc3NlbnNlLXRlY2gvcmVkdWNlLW5ldHdvcmtpbmctZXJyb3JzLWluLW5vZGVqcy0yM2I0ZWI5ZjJkODNcclxuICAgIGlmIChvcHRpb25zLmZyZWVTb2NrZXRUaW1lb3V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgb3B0aW9ucy5mcmVlU29ja2V0VGltZW91dCA9IDQwMDA7XHJcbiAgICB9XHJcbiAgICAvLyBMZWdhY3kgQVBJOiBrZWVwQWxpdmVUaW1lb3V0IHNob3VsZCBiZSByZW5hbWUgdG8gYGZyZWVTb2NrZXRUaW1lb3V0YFxyXG4gICAgaWYgKG9wdGlvbnMua2VlcEFsaXZlVGltZW91dCkge1xyXG4gICAgICBkZXByZWNhdGUoJ29wdGlvbnMua2VlcEFsaXZlVGltZW91dCBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIG9wdGlvbnMuZnJlZVNvY2tldFRpbWVvdXQgaW5zdGVhZCcpO1xyXG4gICAgICBvcHRpb25zLmZyZWVTb2NrZXRUaW1lb3V0ID0gb3B0aW9ucy5rZWVwQWxpdmVUaW1lb3V0O1xyXG4gICAgICBkZWxldGUgb3B0aW9ucy5rZWVwQWxpdmVUaW1lb3V0O1xyXG4gICAgfVxyXG4gICAgLy8gTGVnYWN5IEFQSTogZnJlZVNvY2tldEtlZXBBbGl2ZVRpbWVvdXQgc2hvdWxkIGJlIHJlbmFtZSB0byBgZnJlZVNvY2tldFRpbWVvdXRgXHJcbiAgICBpZiAob3B0aW9ucy5mcmVlU29ja2V0S2VlcEFsaXZlVGltZW91dCkge1xyXG4gICAgICBkZXByZWNhdGUoJ29wdGlvbnMuZnJlZVNvY2tldEtlZXBBbGl2ZVRpbWVvdXQgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBvcHRpb25zLmZyZWVTb2NrZXRUaW1lb3V0IGluc3RlYWQnKTtcclxuICAgICAgb3B0aW9ucy5mcmVlU29ja2V0VGltZW91dCA9IG9wdGlvbnMuZnJlZVNvY2tldEtlZXBBbGl2ZVRpbWVvdXQ7XHJcbiAgICAgIGRlbGV0ZSBvcHRpb25zLmZyZWVTb2NrZXRLZWVwQWxpdmVUaW1lb3V0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNldHMgdGhlIHNvY2tldCB0byB0aW1lb3V0IGFmdGVyIHRpbWVvdXQgbWlsbGlzZWNvbmRzIG9mIGluYWN0aXZpdHkgb24gdGhlIHNvY2tldC5cclxuICAgIC8vIEJ5IGRlZmF1bHQgaXMgZG91YmxlIGZyZWUgc29ja2V0IHRpbWVvdXQuXHJcbiAgICBpZiAob3B0aW9ucy50aW1lb3V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgLy8gbWFrZSBzdXJlIHNvY2tldCBkZWZhdWx0IGluYWN0aXZpdHkgdGltZW91dCA+PSA4c1xyXG4gICAgICBvcHRpb25zLnRpbWVvdXQgPSBNYXRoLm1heChvcHRpb25zLmZyZWVTb2NrZXRUaW1lb3V0ICogMiwgODAwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc3VwcG9ydCBodW1hbml6ZSBmb3JtYXRcclxuICAgIG9wdGlvbnMudGltZW91dCA9IG1zKG9wdGlvbnMudGltZW91dCk7XHJcbiAgICBvcHRpb25zLmZyZWVTb2NrZXRUaW1lb3V0ID0gbXMob3B0aW9ucy5mcmVlU29ja2V0VGltZW91dCk7XHJcbiAgICBvcHRpb25zLnNvY2tldEFjdGl2ZVRUTCA9IG9wdGlvbnMuc29ja2V0QWN0aXZlVFRMID8gbXMob3B0aW9ucy5zb2NrZXRBY3RpdmVUVEwpIDogMDtcclxuXHJcbiAgICBzdXBlcihvcHRpb25zKTtcclxuXHJcbiAgICB0aGlzW0NVUlJFTlRfSURdID0gMDtcclxuXHJcbiAgICAvLyBjcmVhdGUgc29ja2V0IHN1Y2Nlc3MgY291bnRlclxyXG4gICAgdGhpcy5jcmVhdGVTb2NrZXRDb3VudCA9IDA7XHJcbiAgICB0aGlzLmNyZWF0ZVNvY2tldENvdW50TGFzdENoZWNrID0gMDtcclxuXHJcbiAgICB0aGlzLmNyZWF0ZVNvY2tldEVycm9yQ291bnQgPSAwO1xyXG4gICAgdGhpcy5jcmVhdGVTb2NrZXRFcnJvckNvdW50TGFzdENoZWNrID0gMDtcclxuXHJcbiAgICB0aGlzLmNsb3NlU29ja2V0Q291bnQgPSAwO1xyXG4gICAgdGhpcy5jbG9zZVNvY2tldENvdW50TGFzdENoZWNrID0gMDtcclxuXHJcbiAgICAvLyBzb2NrZXQgZXJyb3IgZXZlbnQgY291bnRcclxuICAgIHRoaXMuZXJyb3JTb2NrZXRDb3VudCA9IDA7XHJcbiAgICB0aGlzLmVycm9yU29ja2V0Q291bnRMYXN0Q2hlY2sgPSAwO1xyXG5cclxuICAgIC8vIHJlcXVlc3QgZmluaXNoZWQgY291bnRlclxyXG4gICAgdGhpcy5yZXF1ZXN0Q291bnQgPSAwO1xyXG4gICAgdGhpcy5yZXF1ZXN0Q291bnRMYXN0Q2hlY2sgPSAwO1xyXG5cclxuICAgIC8vIGluY2x1ZGluZyBmcmVlIHNvY2tldCB0aW1lb3V0IGNvdW50ZXJcclxuICAgIHRoaXMudGltZW91dFNvY2tldENvdW50ID0gMDtcclxuICAgIHRoaXMudGltZW91dFNvY2tldENvdW50TGFzdENoZWNrID0gMDtcclxuXHJcbiAgICB0aGlzLm9uKCdmcmVlJywgc29ja2V0ID0+IHtcclxuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL3B1bGwvMzIwMDBcclxuICAgICAgLy8gTm9kZS5qcyBuYXRpdmUgYWdlbnQgd2lsbCBjaGVjayBzb2NrZXQgdGltZW91dCBlcXMgYWdlbnQub3B0aW9ucy50aW1lb3V0LlxyXG4gICAgICAvLyBVc2UgdGhlIHR0bCBvciBmcmVlU29ja2V0VGltZW91dCB0byBvdmVyd3JpdGUuXHJcbiAgICAgIGNvbnN0IHRpbWVvdXQgPSB0aGlzLmNhbGNTb2NrZXRUaW1lb3V0KHNvY2tldCk7XHJcbiAgICAgIGlmICh0aW1lb3V0ID4gMCAmJiBzb2NrZXQudGltZW91dCAhPT0gdGltZW91dCkge1xyXG4gICAgICAgIHNvY2tldC5zZXRUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldCBmcmVlU29ja2V0S2VlcEFsaXZlVGltZW91dCgpIHtcclxuICAgIGRlcHJlY2F0ZSgnYWdlbnQuZnJlZVNvY2tldEtlZXBBbGl2ZVRpbWVvdXQgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBhZ2VudC5vcHRpb25zLmZyZWVTb2NrZXRUaW1lb3V0IGluc3RlYWQnKTtcclxuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZnJlZVNvY2tldFRpbWVvdXQ7XHJcbiAgfVxyXG5cclxuICBnZXQgdGltZW91dCgpIHtcclxuICAgIGRlcHJlY2F0ZSgnYWdlbnQudGltZW91dCBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIGFnZW50Lm9wdGlvbnMudGltZW91dCBpbnN0ZWFkJyk7XHJcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnRpbWVvdXQ7XHJcbiAgfVxyXG5cclxuICBnZXQgc29ja2V0QWN0aXZlVFRMKCkge1xyXG4gICAgZGVwcmVjYXRlKCdhZ2VudC5zb2NrZXRBY3RpdmVUVEwgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBhZ2VudC5vcHRpb25zLnNvY2tldEFjdGl2ZVRUTCBpbnN0ZWFkJyk7XHJcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnNvY2tldEFjdGl2ZVRUTDtcclxuICB9XHJcblxyXG4gIGNhbGNTb2NrZXRUaW1lb3V0KHNvY2tldCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiByZXR1cm4gPD0gMDogc2hvdWxkIGZyZWUgc29ja2V0XHJcbiAgICAgKiByZXR1cm4gPiAwOiBzaG91bGQgdXBkYXRlIHNvY2tldCB0aW1lb3V0XHJcbiAgICAgKiByZXR1cm4gdW5kZWZpbmVkOiBub3QgZmluZCBjdXN0b20gdGltZW91dFxyXG4gICAgICovXHJcbiAgICBsZXQgZnJlZVNvY2tldFRpbWVvdXQgPSB0aGlzLm9wdGlvbnMuZnJlZVNvY2tldFRpbWVvdXQ7XHJcbiAgICBjb25zdCBzb2NrZXRBY3RpdmVUVEwgPSB0aGlzLm9wdGlvbnMuc29ja2V0QWN0aXZlVFRMO1xyXG4gICAgaWYgKHNvY2tldEFjdGl2ZVRUTCkge1xyXG4gICAgICAvLyBjaGVjayBzb2NrZXRBY3RpdmVUVExcclxuICAgICAgY29uc3QgYWxpdmVUaW1lID0gRGF0ZS5ub3coKSAtIHNvY2tldFtTT0NLRVRfQ1JFQVRFRF9USU1FXTtcclxuICAgICAgY29uc3QgZGlmZiA9IHNvY2tldEFjdGl2ZVRUTCAtIGFsaXZlVGltZTtcclxuICAgICAgaWYgKGRpZmYgPD0gMCkge1xyXG4gICAgICAgIHJldHVybiBkaWZmO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChmcmVlU29ja2V0VGltZW91dCAmJiBkaWZmIDwgZnJlZVNvY2tldFRpbWVvdXQpIHtcclxuICAgICAgICBmcmVlU29ja2V0VGltZW91dCA9IGRpZmY7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHNldCBmcmVlU29ja2V0VGltZW91dFxyXG4gICAgaWYgKGZyZWVTb2NrZXRUaW1lb3V0KSB7XHJcbiAgICAgIC8vIHNldCBmcmVlIGtlZXBhbGl2ZSB0aW1lclxyXG4gICAgICAvLyB0cnkgdG8gdXNlIHNvY2tldCBjdXN0b20gZnJlZVNvY2tldFRpbWVvdXQgZmlyc3QsIHN1cHBvcnQgaGVhZGVyc1sna2VlcC1hbGl2ZSddXHJcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlLW1vZHVsZXMvdXJsbGliL2Jsb2IvYjc2MDUzMDIwOTIzZjRkOTlhMWM5M2NmMmUxNmUwYzViYTEwYmFjZi9saWIvdXJsbGliLmpzI0w0OThcclxuICAgICAgY29uc3QgY3VzdG9tRnJlZVNvY2tldFRpbWVvdXQgPSBzb2NrZXQuZnJlZVNvY2tldFRpbWVvdXQgfHwgc29ja2V0LmZyZWVTb2NrZXRLZWVwQWxpdmVUaW1lb3V0O1xyXG4gICAgICByZXR1cm4gY3VzdG9tRnJlZVNvY2tldFRpbWVvdXQgfHwgZnJlZVNvY2tldFRpbWVvdXQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBrZWVwU29ja2V0QWxpdmUoc29ja2V0KSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBzdXBlci5rZWVwU29ja2V0QWxpdmUoc29ja2V0KTtcclxuICAgIC8vIHNob3VsZCBub3Qga2VlcEFsaXZlLCBkbyBub3RoaW5nXHJcbiAgICBpZiAoIXJlc3VsdCkgcmV0dXJuIHJlc3VsdDtcclxuXHJcbiAgICBjb25zdCBjdXN0b21UaW1lb3V0ID0gdGhpcy5jYWxjU29ja2V0VGltZW91dChzb2NrZXQpO1xyXG4gICAgaWYgKHR5cGVvZiBjdXN0b21UaW1lb3V0ID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGlmIChjdXN0b21UaW1lb3V0IDw9IDApIHtcclxuICAgICAgZGVidWcoJyVzKHJlcXVlc3RzOiAlcywgZmluaXNoZWQ6ICVzKSBmcmVlIGJ1dCBuZWVkIHRvIGRlc3Ryb3kgYnkgVFRMLCByZXF1ZXN0IGNvdW50ICVzLCBkaWZmIGlzICVzJyxcclxuICAgICAgICBzb2NrZXRbU09DS0VUX05BTUVdLCBzb2NrZXRbU09DS0VUX1JFUVVFU1RfQ09VTlRdLCBzb2NrZXRbU09DS0VUX1JFUVVFU1RfRklOSVNIRURfQ09VTlRdLCBjdXN0b21UaW1lb3V0KTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKHNvY2tldC50aW1lb3V0ICE9PSBjdXN0b21UaW1lb3V0KSB7XHJcbiAgICAgIHNvY2tldC5zZXRUaW1lb3V0KGN1c3RvbVRpbWVvdXQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICAvLyBvbmx5IGNhbGwgb24gYWRkUmVxdWVzdFxyXG4gIHJldXNlU29ja2V0KC4uLmFyZ3MpIHtcclxuICAgIC8vIHJldXNlU29ja2V0KHNvY2tldCwgcmVxKVxyXG4gICAgc3VwZXIucmV1c2VTb2NrZXQoLi4uYXJncyk7XHJcbiAgICBjb25zdCBzb2NrZXQgPSBhcmdzWzBdO1xyXG4gICAgY29uc3QgcmVxID0gYXJnc1sxXTtcclxuICAgIHJlcS5yZXVzZWRTb2NrZXQgPSB0cnVlO1xyXG4gICAgY29uc3QgYWdlbnRUaW1lb3V0ID0gdGhpcy5vcHRpb25zLnRpbWVvdXQ7XHJcbiAgICBpZiAoZ2V0U29ja2V0VGltZW91dChzb2NrZXQpICE9PSBhZ2VudFRpbWVvdXQpIHtcclxuICAgICAgLy8gcmVzZXQgdGltZW91dCBiZWZvcmUgdXNlXHJcbiAgICAgIHNvY2tldC5zZXRUaW1lb3V0KGFnZW50VGltZW91dCk7XHJcbiAgICAgIGRlYnVnKCclcyByZXNldCB0aW1lb3V0IHRvICVzbXMnLCBzb2NrZXRbU09DS0VUX05BTUVdLCBhZ2VudFRpbWVvdXQpO1xyXG4gICAgfVxyXG4gICAgc29ja2V0W1NPQ0tFVF9SRVFVRVNUX0NPVU5UXSsrO1xyXG4gICAgZGVidWcoJyVzKHJlcXVlc3RzOiAlcywgZmluaXNoZWQ6ICVzKSByZXVzZSBvbiBhZGRSZXF1ZXN0LCB0aW1lb3V0ICVzbXMnLFxyXG4gICAgICBzb2NrZXRbU09DS0VUX05BTUVdLCBzb2NrZXRbU09DS0VUX1JFUVVFU1RfQ09VTlRdLCBzb2NrZXRbU09DS0VUX1JFUVVFU1RfRklOSVNIRURfQ09VTlRdLFxyXG4gICAgICBnZXRTb2NrZXRUaW1lb3V0KHNvY2tldCkpO1xyXG4gIH1cclxuXHJcbiAgW0NSRUFURV9JRF0oKSB7XHJcbiAgICBjb25zdCBpZCA9IHRoaXNbQ1VSUkVOVF9JRF0rKztcclxuICAgIGlmICh0aGlzW0NVUlJFTlRfSURdID09PSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikgdGhpc1tDVVJSRU5UX0lEXSA9IDA7XHJcbiAgICByZXR1cm4gaWQ7XHJcbiAgfVxyXG5cclxuICBbSU5JVF9TT0NLRVRdKHNvY2tldCwgb3B0aW9ucykge1xyXG4gICAgLy8gYnVnZml4IGhlcmUuXHJcbiAgICAvLyBodHRwcyBvbiBub2RlIDgsIDEwIHdvbid0IHNldCBhZ2VudC5vcHRpb25zLnRpbWVvdXQgYnkgZGVmYXVsdFxyXG4gICAgLy8gVE9ETzogbmVlZCB0byBmaXggb24gbm9kZSBpdHNlbGZcclxuICAgIGlmIChvcHRpb25zLnRpbWVvdXQpIHtcclxuICAgICAgY29uc3QgdGltZW91dCA9IGdldFNvY2tldFRpbWVvdXQoc29ja2V0KTtcclxuICAgICAgaWYgKCF0aW1lb3V0KSB7XHJcbiAgICAgICAgc29ja2V0LnNldFRpbWVvdXQob3B0aW9ucy50aW1lb3V0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLm9wdGlvbnMua2VlcEFsaXZlKSB7XHJcbiAgICAgIC8vIERpc2FibGUgTmFnbGUncyBhbGdvcml0aG06IGh0dHA6Ly9ibG9nLmNhdXN0aWsuY29tLzIwMTIvMDQvMDgvc2NhbGluZy1ub2RlLWpzLXRvLTEwMGstY29uY3VycmVudC1jb25uZWN0aW9ucy9cclxuICAgICAgLy8gaHR0cHM6Ly9mZW5nbWsyLmNvbS9iZW5jaG1hcmsvbmFnbGUtYWxnb3JpdGhtLWRlbGF5ZWQtYWNrLW1vY2suaHRtbFxyXG4gICAgICBzb2NrZXQuc2V0Tm9EZWxheSh0cnVlKTtcclxuICAgIH1cclxuICAgIHRoaXMuY3JlYXRlU29ja2V0Q291bnQrKztcclxuICAgIGlmICh0aGlzLm9wdGlvbnMuc29ja2V0QWN0aXZlVFRMKSB7XHJcbiAgICAgIHNvY2tldFtTT0NLRVRfQ1JFQVRFRF9USU1FXSA9IERhdGUubm93KCk7XHJcbiAgICB9XHJcbiAgICAvLyBkb24ndCBzaG93IHRoZSBob2xlICctLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLScga2V5IHN0cmluZ1xyXG4gICAgc29ja2V0W1NPQ0tFVF9OQU1FXSA9IGBzb2NrWyR7dGhpc1tDUkVBVEVfSURdKCl9IyR7b3B0aW9ucy5fYWdlbnRLZXl9XWAuc3BsaXQoJy0tLS0tQkVHSU4nLCAxKVswXTtcclxuICAgIHNvY2tldFtTT0NLRVRfUkVRVUVTVF9DT1VOVF0gPSAxO1xyXG4gICAgc29ja2V0W1NPQ0tFVF9SRVFVRVNUX0ZJTklTSEVEX0NPVU5UXSA9IDA7XHJcbiAgICBpbnN0YWxsTGlzdGVuZXJzKHRoaXMsIHNvY2tldCwgb3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVDb25uZWN0aW9uKG9wdGlvbnMsIG9uY3JlYXRlKSB7XHJcbiAgICBsZXQgY2FsbGVkID0gZmFsc2U7XHJcbiAgICBjb25zdCBvbk5ld0NyZWF0ZSA9IChlcnIsIHNvY2tldCkgPT4ge1xyXG4gICAgICBpZiAoY2FsbGVkKSByZXR1cm47XHJcbiAgICAgIGNhbGxlZCA9IHRydWU7XHJcblxyXG4gICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVTb2NrZXRFcnJvckNvdW50Kys7XHJcbiAgICAgICAgcmV0dXJuIG9uY3JlYXRlKGVycik7XHJcbiAgICAgIH1cclxuICAgICAgdGhpc1tJTklUX1NPQ0tFVF0oc29ja2V0LCBvcHRpb25zKTtcclxuICAgICAgb25jcmVhdGUoZXJyLCBzb2NrZXQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBuZXdTb2NrZXQgPSBzdXBlci5jcmVhdGVDb25uZWN0aW9uKG9wdGlvbnMsIG9uTmV3Q3JlYXRlKTtcclxuICAgIGlmIChuZXdTb2NrZXQpIG9uTmV3Q3JlYXRlKG51bGwsIG5ld1NvY2tldCk7XHJcbiAgICByZXR1cm4gbmV3U29ja2V0O1xyXG4gIH1cclxuXHJcbiAgZ2V0IHN0YXR1c0NoYW5nZWQoKSB7XHJcbiAgICBjb25zdCBjaGFuZ2VkID0gdGhpcy5jcmVhdGVTb2NrZXRDb3VudCAhPT0gdGhpcy5jcmVhdGVTb2NrZXRDb3VudExhc3RDaGVjayB8fFxyXG4gICAgICB0aGlzLmNyZWF0ZVNvY2tldEVycm9yQ291bnQgIT09IHRoaXMuY3JlYXRlU29ja2V0RXJyb3JDb3VudExhc3RDaGVjayB8fFxyXG4gICAgICB0aGlzLmNsb3NlU29ja2V0Q291bnQgIT09IHRoaXMuY2xvc2VTb2NrZXRDb3VudExhc3RDaGVjayB8fFxyXG4gICAgICB0aGlzLmVycm9yU29ja2V0Q291bnQgIT09IHRoaXMuZXJyb3JTb2NrZXRDb3VudExhc3RDaGVjayB8fFxyXG4gICAgICB0aGlzLnRpbWVvdXRTb2NrZXRDb3VudCAhPT0gdGhpcy50aW1lb3V0U29ja2V0Q291bnRMYXN0Q2hlY2sgfHxcclxuICAgICAgdGhpcy5yZXF1ZXN0Q291bnQgIT09IHRoaXMucmVxdWVzdENvdW50TGFzdENoZWNrO1xyXG4gICAgaWYgKGNoYW5nZWQpIHtcclxuICAgICAgdGhpcy5jcmVhdGVTb2NrZXRDb3VudExhc3RDaGVjayA9IHRoaXMuY3JlYXRlU29ja2V0Q291bnQ7XHJcbiAgICAgIHRoaXMuY3JlYXRlU29ja2V0RXJyb3JDb3VudExhc3RDaGVjayA9IHRoaXMuY3JlYXRlU29ja2V0RXJyb3JDb3VudDtcclxuICAgICAgdGhpcy5jbG9zZVNvY2tldENvdW50TGFzdENoZWNrID0gdGhpcy5jbG9zZVNvY2tldENvdW50O1xyXG4gICAgICB0aGlzLmVycm9yU29ja2V0Q291bnRMYXN0Q2hlY2sgPSB0aGlzLmVycm9yU29ja2V0Q291bnQ7XHJcbiAgICAgIHRoaXMudGltZW91dFNvY2tldENvdW50TGFzdENoZWNrID0gdGhpcy50aW1lb3V0U29ja2V0Q291bnQ7XHJcbiAgICAgIHRoaXMucmVxdWVzdENvdW50TGFzdENoZWNrID0gdGhpcy5yZXF1ZXN0Q291bnQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2hhbmdlZDtcclxuICB9XHJcblxyXG4gIGdldEN1cnJlbnRTdGF0dXMoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjcmVhdGVTb2NrZXRDb3VudDogdGhpcy5jcmVhdGVTb2NrZXRDb3VudCxcclxuICAgICAgY3JlYXRlU29ja2V0RXJyb3JDb3VudDogdGhpcy5jcmVhdGVTb2NrZXRFcnJvckNvdW50LFxyXG4gICAgICBjbG9zZVNvY2tldENvdW50OiB0aGlzLmNsb3NlU29ja2V0Q291bnQsXHJcbiAgICAgIGVycm9yU29ja2V0Q291bnQ6IHRoaXMuZXJyb3JTb2NrZXRDb3VudCxcclxuICAgICAgdGltZW91dFNvY2tldENvdW50OiB0aGlzLnRpbWVvdXRTb2NrZXRDb3VudCxcclxuICAgICAgcmVxdWVzdENvdW50OiB0aGlzLnJlcXVlc3RDb3VudCxcclxuICAgICAgZnJlZVNvY2tldHM6IGluc3BlY3QodGhpcy5mcmVlU29ja2V0cyksXHJcbiAgICAgIHNvY2tldHM6IGluc3BlY3QodGhpcy5zb2NrZXRzKSxcclxuICAgICAgcmVxdWVzdHM6IGluc3BlY3QodGhpcy5yZXF1ZXN0cyksXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuLy8gbm9kZSA4IGRvbid0IGhhcyB0aW1lb3V0IGF0dHJpYnV0ZSBvbiBzb2NrZXRcclxuLy8gaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL3B1bGwvMjEyMDQvZmlsZXMjZGlmZi1lNmVmMDI0YzM3NzVkNzg3YzM4NDg3YTYzMDllNDkxZFI0MDhcclxuZnVuY3Rpb24gZ2V0U29ja2V0VGltZW91dChzb2NrZXQpIHtcclxuICByZXR1cm4gc29ja2V0LnRpbWVvdXQgfHwgc29ja2V0Ll9pZGxlVGltZW91dDtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5zdGFsbExpc3RlbmVycyhhZ2VudCwgc29ja2V0LCBvcHRpb25zKSB7XHJcbiAgZGVidWcoJyVzIGNyZWF0ZSwgdGltZW91dCAlc21zJywgc29ja2V0W1NPQ0tFVF9OQU1FXSwgZ2V0U29ja2V0VGltZW91dChzb2NrZXQpKTtcclxuXHJcbiAgLy8gbGlzdGVuZXIgc29ja2V0IGV2ZW50czogY2xvc2UsIHRpbWVvdXQsIGVycm9yLCBmcmVlXHJcbiAgZnVuY3Rpb24gb25GcmVlKCkge1xyXG4gICAgLy8gY3JlYXRlIGFuZCBzb2NrZXQuZW1pdCgnZnJlZScpIGxvZ2ljXHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzL25vZGUvYmxvYi9tYXN0ZXIvbGliL19odHRwX2FnZW50LmpzI0wzMTFcclxuICAgIC8vIG5vIHJlcSBvbiB0aGUgc29ja2V0LCBpdCBzaG91bGQgYmUgdGhlIG5ldyBzb2NrZXRcclxuICAgIGlmICghc29ja2V0Ll9odHRwTWVzc2FnZSAmJiBzb2NrZXRbU09DS0VUX1JFUVVFU1RfQ09VTlRdID09PSAxKSByZXR1cm47XHJcblxyXG4gICAgc29ja2V0W1NPQ0tFVF9SRVFVRVNUX0ZJTklTSEVEX0NPVU5UXSsrO1xyXG4gICAgYWdlbnQucmVxdWVzdENvdW50Kys7XHJcbiAgICBkZWJ1ZygnJXMocmVxdWVzdHM6ICVzLCBmaW5pc2hlZDogJXMpIGZyZWUnLFxyXG4gICAgICBzb2NrZXRbU09DS0VUX05BTUVdLCBzb2NrZXRbU09DS0VUX1JFUVVFU1RfQ09VTlRdLCBzb2NrZXRbU09DS0VUX1JFUVVFU1RfRklOSVNIRURfQ09VTlRdKTtcclxuXHJcbiAgICAvLyBzaG91bGQgcmV1c2Ugb24gcGVkZGluZyByZXF1ZXN0cz9cclxuICAgIGNvbnN0IG5hbWUgPSBhZ2VudC5nZXROYW1lKG9wdGlvbnMpO1xyXG4gICAgaWYgKHNvY2tldC53cml0YWJsZSAmJiBhZ2VudC5yZXF1ZXN0c1tuYW1lXSAmJiBhZ2VudC5yZXF1ZXN0c1tuYW1lXS5sZW5ndGgpIHtcclxuICAgICAgLy8gd2lsbCBiZSByZXVzZSBvbiBhZ2VudCBmcmVlIGxpc3RlbmVyXHJcbiAgICAgIHNvY2tldFtTT0NLRVRfUkVRVUVTVF9DT1VOVF0rKztcclxuICAgICAgZGVidWcoJyVzKHJlcXVlc3RzOiAlcywgZmluaXNoZWQ6ICVzKSB3aWxsIGJlIHJldXNlIG9uIGFnZW50IGZyZWUgZXZlbnQnLFxyXG4gICAgICAgIHNvY2tldFtTT0NLRVRfTkFNRV0sIHNvY2tldFtTT0NLRVRfUkVRVUVTVF9DT1VOVF0sIHNvY2tldFtTT0NLRVRfUkVRVUVTVF9GSU5JU0hFRF9DT1VOVF0pO1xyXG4gICAgfVxyXG4gIH1cclxuICBzb2NrZXQub24oJ2ZyZWUnLCBvbkZyZWUpO1xyXG5cclxuICBmdW5jdGlvbiBvbkNsb3NlKGlzRXJyb3IpIHtcclxuICAgIGRlYnVnKCclcyhyZXF1ZXN0czogJXMsIGZpbmlzaGVkOiAlcykgY2xvc2UsIGlzRXJyb3I6ICVzJyxcclxuICAgICAgc29ja2V0W1NPQ0tFVF9OQU1FXSwgc29ja2V0W1NPQ0tFVF9SRVFVRVNUX0NPVU5UXSwgc29ja2V0W1NPQ0tFVF9SRVFVRVNUX0ZJTklTSEVEX0NPVU5UXSwgaXNFcnJvcik7XHJcbiAgICBhZ2VudC5jbG9zZVNvY2tldENvdW50Kys7XHJcbiAgfVxyXG4gIHNvY2tldC5vbignY2xvc2UnLCBvbkNsb3NlKTtcclxuXHJcbiAgLy8gc3RhcnQgc29ja2V0IHRpbWVvdXQgaGFuZGxlclxyXG4gIGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcclxuICAgIC8vIG9uVGltZW91dCBhbmQgZW1pdFJlcXVlc3RUaW1lb3V0KF9odHRwX2NsaWVudC5qcylcclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlanMvbm9kZS9ibG9iL3YxMi54L2xpYi9faHR0cF9jbGllbnQuanMjTDcxMVxyXG4gICAgY29uc3QgbGlzdGVuZXJDb3VudCA9IHNvY2tldC5saXN0ZW5lcnMoJ3RpbWVvdXQnKS5sZW5ndGg7XHJcbiAgICAvLyBub2RlIDw9IDEwLCBkZWZhdWx0IGxpc3RlbmVyQ291bnQgaXMgMSwgb25UaW1lb3V0XHJcbiAgICAvLyAxMSA8IG5vZGUgPD0gMTIsIGRlZmF1bHQgbGlzdGVuZXJDb3VudCBpcyAyLCBvblRpbWVvdXQgYW5kIGVtaXRSZXF1ZXN0VGltZW91dFxyXG4gICAgLy8gbm9kZSA+PSAxMywgZGVmYXVsdCBsaXN0ZW5lckNvdW50IGlzIDMsIG9uVGltZW91dCxcclxuICAgIC8vICAgb25UaW1lb3V0KGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlanMvbm9kZS9wdWxsLzMyMDAwL2ZpbGVzI2RpZmYtNWY3ZmIwODUwNDEyYzZiZTE4OWZhZWRkZWE2YzUzNTlSMzMzKVxyXG4gICAgLy8gICBhbmQgZW1pdFJlcXVlc3RUaW1lb3V0XHJcbiAgICBjb25zdCB0aW1lb3V0ID0gZ2V0U29ja2V0VGltZW91dChzb2NrZXQpO1xyXG4gICAgY29uc3QgcmVxID0gc29ja2V0Ll9odHRwTWVzc2FnZTtcclxuICAgIGNvbnN0IHJlcVRpbWVvdXRMaXN0ZW5lckNvdW50ID0gcmVxICYmIHJlcS5saXN0ZW5lcnMoJ3RpbWVvdXQnKS5sZW5ndGggfHwgMDtcclxuICAgIGRlYnVnKCclcyhyZXF1ZXN0czogJXMsIGZpbmlzaGVkOiAlcykgdGltZW91dCBhZnRlciAlc21zLCBsaXN0ZW5lcnMgJXMsIGRlZmF1bHRUaW1lb3V0TGlzdGVuZXJDb3VudCAlcywgaGFzSHR0cFJlcXVlc3QgJXMsIEh0dHBSZXF1ZXN0IHRpbWVvdXRMaXN0ZW5lckNvdW50ICVzJyxcclxuICAgICAgc29ja2V0W1NPQ0tFVF9OQU1FXSwgc29ja2V0W1NPQ0tFVF9SRVFVRVNUX0NPVU5UXSwgc29ja2V0W1NPQ0tFVF9SRVFVRVNUX0ZJTklTSEVEX0NPVU5UXSxcclxuICAgICAgdGltZW91dCwgbGlzdGVuZXJDb3VudCwgZGVmYXVsdFRpbWVvdXRMaXN0ZW5lckNvdW50LCAhIXJlcSwgcmVxVGltZW91dExpc3RlbmVyQ291bnQpO1xyXG4gICAgaWYgKGRlYnVnLmVuYWJsZWQpIHtcclxuICAgICAgZGVidWcoJ3RpbWVvdXQgbGlzdGVuZXJzOiAlcycsIHNvY2tldC5saXN0ZW5lcnMoJ3RpbWVvdXQnKS5tYXAoZiA9PiBmLm5hbWUpLmpvaW4oJywgJykpO1xyXG4gICAgfVxyXG4gICAgYWdlbnQudGltZW91dFNvY2tldENvdW50Kys7XHJcbiAgICBjb25zdCBuYW1lID0gYWdlbnQuZ2V0TmFtZShvcHRpb25zKTtcclxuICAgIGlmIChhZ2VudC5mcmVlU29ja2V0c1tuYW1lXSAmJiBhZ2VudC5mcmVlU29ja2V0c1tuYW1lXS5pbmRleE9mKHNvY2tldCkgIT09IC0xKSB7XHJcbiAgICAgIC8vIGZyZWUgc29ja2V0IHRpbWVvdXQsIGRlc3Ryb3kgcXVpZXRseVxyXG4gICAgICBzb2NrZXQuZGVzdHJveSgpO1xyXG4gICAgICAvLyBSZW1vdmUgaXQgZnJvbSBmcmVlU29ja2V0cyBsaXN0IGltbWVkaWF0ZWx5IHRvIHByZXZlbnQgbmV3IHJlcXVlc3RzXHJcbiAgICAgIC8vIGZyb20gYmVpbmcgc2VudCB0aHJvdWdoIHRoaXMgc29ja2V0LlxyXG4gICAgICBhZ2VudC5yZW1vdmVTb2NrZXQoc29ja2V0LCBvcHRpb25zKTtcclxuICAgICAgZGVidWcoJyVzIGlzIGZyZWUsIGRlc3Ryb3kgcXVpZXRseScsIHNvY2tldFtTT0NLRVRfTkFNRV0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gYW55IHJlcXVlc3Qgc29ja2V0IHRpbWVvdXQgaGFuZGxlcixcclxuICAgICAgLy8gYWdlbnQgbmVlZCB0byBoYW5kbGUgc29ja2V0IHRpbWVvdXQgaXRzZWxmLlxyXG4gICAgICAvL1xyXG4gICAgICAvLyBjdXN0b20gcmVxdWVzdCBzb2NrZXQgdGltZW91dCBoYW5kbGUgbG9naWMgbXVzdCBmb2xsb3cgdGhlc2UgcnVsZXM6XHJcbiAgICAgIC8vICAxLiBEZXN0cm95IHNvY2tldCBmaXJzdFxyXG4gICAgICAvLyAgMi4gTXVzdCBlbWl0IHNvY2tldCAnYWdlbnRSZW1vdmUnIGV2ZW50IHRlbGwgYWdlbnQgcmVtb3ZlIHNvY2tldFxyXG4gICAgICAvLyAgICAgZnJvbSBmcmVlU29ja2V0cyBsaXN0IGltbWVkaWF0ZWx5LlxyXG4gICAgICAvLyAgICAgT3RoZXJpc2UgeW91IG1heSBiZSBnZXQgJ3NvY2tldCBoYW5nIHVwJyBlcnJvciB3aGVuIHJldXNlXHJcbiAgICAgIC8vICAgICBmcmVlIHNvY2tldCBhbmQgdGltZW91dCBoYXBwZW4gaW4gdGhlIHNhbWUgdGltZS5cclxuICAgICAgaWYgKHJlcVRpbWVvdXRMaXN0ZW5lckNvdW50ID09PSAwKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1NvY2tldCB0aW1lb3V0Jyk7XHJcbiAgICAgICAgZXJyb3IuY29kZSA9ICdFUlJfU09DS0VUX1RJTUVPVVQnO1xyXG4gICAgICAgIGVycm9yLnRpbWVvdXQgPSB0aW1lb3V0O1xyXG4gICAgICAgIC8vIG11c3QgbWFudWFsbHkgY2FsbCBzb2NrZXQuZW5kKCkgb3Igc29ja2V0LmRlc3Ryb3koKSB0byBlbmQgdGhlIGNvbm5lY3Rpb24uXHJcbiAgICAgICAgLy8gaHR0cHM6Ly9ub2RlanMub3JnL2Rpc3QvbGF0ZXN0LXYxMC54L2RvY3MvYXBpL25ldC5odG1sI25ldF9zb2NrZXRfc2V0dGltZW91dF90aW1lb3V0X2NhbGxiYWNrXHJcbiAgICAgICAgc29ja2V0LmRlc3Ryb3koZXJyb3IpO1xyXG4gICAgICAgIGFnZW50LnJlbW92ZVNvY2tldChzb2NrZXQsIG9wdGlvbnMpO1xyXG4gICAgICAgIGRlYnVnKCclcyBkZXN0cm95IHdpdGggdGltZW91dCBlcnJvcicsIHNvY2tldFtTT0NLRVRfTkFNRV0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHNvY2tldC5vbigndGltZW91dCcsIG9uVGltZW91dCk7XHJcblxyXG4gIGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7XHJcbiAgICBjb25zdCBsaXN0ZW5lckNvdW50ID0gc29ja2V0Lmxpc3RlbmVycygnZXJyb3InKS5sZW5ndGg7XHJcbiAgICBkZWJ1ZygnJXMocmVxdWVzdHM6ICVzLCBmaW5pc2hlZDogJXMpIGVycm9yOiAlcywgbGlzdGVuZXJDb3VudDogJXMnLFxyXG4gICAgICBzb2NrZXRbU09DS0VUX05BTUVdLCBzb2NrZXRbU09DS0VUX1JFUVVFU1RfQ09VTlRdLCBzb2NrZXRbU09DS0VUX1JFUVVFU1RfRklOSVNIRURfQ09VTlRdLFxyXG4gICAgICBlcnIsIGxpc3RlbmVyQ291bnQpO1xyXG4gICAgYWdlbnQuZXJyb3JTb2NrZXRDb3VudCsrO1xyXG4gICAgaWYgKGxpc3RlbmVyQ291bnQgPT09IDEpIHtcclxuICAgICAgLy8gaWYgc29ja2V0IGRvbid0IGNvbnRhaW4gZXJyb3IgZXZlbnQgaGFuZGxlciwgZG9uJ3QgY2F0Y2ggaXQsIGVtaXQgaXQgYWdhaW5cclxuICAgICAgZGVidWcoJyVzIGVtaXQgdW5jYXVnaHQgZXJyb3IgZXZlbnQnLCBzb2NrZXRbU09DS0VUX05BTUVdKTtcclxuICAgICAgc29ja2V0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uRXJyb3IpO1xyXG4gICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCBlcnIpO1xyXG4gICAgfVxyXG4gIH1cclxuICBzb2NrZXQub24oJ2Vycm9yJywgb25FcnJvcik7XHJcblxyXG4gIGZ1bmN0aW9uIG9uUmVtb3ZlKCkge1xyXG4gICAgZGVidWcoJyVzKHJlcXVlc3RzOiAlcywgZmluaXNoZWQ6ICVzKSBhZ2VudFJlbW92ZScsXHJcbiAgICAgIHNvY2tldFtTT0NLRVRfTkFNRV0sXHJcbiAgICAgIHNvY2tldFtTT0NLRVRfUkVRVUVTVF9DT1VOVF0sIHNvY2tldFtTT0NLRVRfUkVRVUVTVF9GSU5JU0hFRF9DT1VOVF0pO1xyXG4gICAgLy8gV2UgbmVlZCB0aGlzIGZ1bmN0aW9uIGZvciBjYXNlcyBsaWtlIEhUVFAgJ3VwZ3JhZGUnXHJcbiAgICAvLyAoZGVmaW5lZCBieSBXZWJTb2NrZXRzKSB3aGVyZSB3ZSBuZWVkIHRvIHJlbW92ZSBhIHNvY2tldCBmcm9tIHRoZVxyXG4gICAgLy8gcG9vbCBiZWNhdXNlIGl0J2xsIGJlIGxvY2tlZCB1cCBpbmRlZmluaXRlbHlcclxuICAgIHNvY2tldC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbkNsb3NlKTtcclxuICAgIHNvY2tldC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbkVycm9yKTtcclxuICAgIHNvY2tldC5yZW1vdmVMaXN0ZW5lcignZnJlZScsIG9uRnJlZSk7XHJcbiAgICBzb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ3RpbWVvdXQnLCBvblRpbWVvdXQpO1xyXG4gICAgc29ja2V0LnJlbW92ZUxpc3RlbmVyKCdhZ2VudFJlbW92ZScsIG9uUmVtb3ZlKTtcclxuICB9XHJcbiAgc29ja2V0Lm9uKCdhZ2VudFJlbW92ZScsIG9uUmVtb3ZlKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBBZ2VudDtcclxuXHJcbmZ1bmN0aW9uIGluc3BlY3Qob2JqKSB7XHJcbiAgY29uc3QgcmVzID0ge307XHJcbiAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICByZXNba2V5XSA9IG9ialtrZXldLmxlbmd0aDtcclxuICB9XHJcbiAgcmV0dXJuIHJlcztcclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/agentkeepalive/lib/agent.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/agentkeepalive/lib/constants.js":
/*!******************************************************!*\
  !*** ./node_modules/agentkeepalive/lib/constants.js ***!
  \******************************************************/
/***/ ((module) => {

eval("\r\n\r\nmodule.exports = {\r\n  // agent\r\n  CURRENT_ID: Symbol('agentkeepalive#currentId'),\r\n  CREATE_ID: Symbol('agentkeepalive#createId'),\r\n  INIT_SOCKET: Symbol('agentkeepalive#initSocket'),\r\n  CREATE_HTTPS_CONNECTION: Symbol('agentkeepalive#createHttpsConnection'),\r\n  // socket\r\n  SOCKET_CREATED_TIME: Symbol('agentkeepalive#socketCreatedTime'),\r\n  SOCKET_NAME: Symbol('agentkeepalive#socketName'),\r\n  SOCKET_REQUEST_COUNT: Symbol('agentkeepalive#socketRequestCount'),\r\n  SOCKET_REQUEST_FINISHED_COUNT: Symbol('agentkeepalive#socketRequestFinishedCount'),\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYWdlbnRrZWVwYWxpdmUvbGliL2NvbnN0YW50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnVzaW9uLWFpLy4vbm9kZV9tb2R1bGVzL2FnZW50a2VlcGFsaXZlL2xpYi9jb25zdGFudHMuanM/OGJhZCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAvLyBhZ2VudFxyXG4gIENVUlJFTlRfSUQ6IFN5bWJvbCgnYWdlbnRrZWVwYWxpdmUjY3VycmVudElkJyksXHJcbiAgQ1JFQVRFX0lEOiBTeW1ib2woJ2FnZW50a2VlcGFsaXZlI2NyZWF0ZUlkJyksXHJcbiAgSU5JVF9TT0NLRVQ6IFN5bWJvbCgnYWdlbnRrZWVwYWxpdmUjaW5pdFNvY2tldCcpLFxyXG4gIENSRUFURV9IVFRQU19DT05ORUNUSU9OOiBTeW1ib2woJ2FnZW50a2VlcGFsaXZlI2NyZWF0ZUh0dHBzQ29ubmVjdGlvbicpLFxyXG4gIC8vIHNvY2tldFxyXG4gIFNPQ0tFVF9DUkVBVEVEX1RJTUU6IFN5bWJvbCgnYWdlbnRrZWVwYWxpdmUjc29ja2V0Q3JlYXRlZFRpbWUnKSxcclxuICBTT0NLRVRfTkFNRTogU3ltYm9sKCdhZ2VudGtlZXBhbGl2ZSNzb2NrZXROYW1lJyksXHJcbiAgU09DS0VUX1JFUVVFU1RfQ09VTlQ6IFN5bWJvbCgnYWdlbnRrZWVwYWxpdmUjc29ja2V0UmVxdWVzdENvdW50JyksXHJcbiAgU09DS0VUX1JFUVVFU1RfRklOSVNIRURfQ09VTlQ6IFN5bWJvbCgnYWdlbnRrZWVwYWxpdmUjc29ja2V0UmVxdWVzdEZpbmlzaGVkQ291bnQnKSxcclxufTtcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/agentkeepalive/lib/constants.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/agentkeepalive/lib/https_agent.js":
/*!********************************************************!*\
  !*** ./node_modules/agentkeepalive/lib/https_agent.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\r\n\r\nconst OriginalHttpsAgent = (__webpack_require__(/*! https */ \"https\").Agent);\r\nconst HttpAgent = __webpack_require__(/*! ./agent */ \"(rsc)/./node_modules/agentkeepalive/lib/agent.js\");\r\nconst {\r\n  INIT_SOCKET,\r\n  CREATE_HTTPS_CONNECTION,\r\n} = __webpack_require__(/*! ./constants */ \"(rsc)/./node_modules/agentkeepalive/lib/constants.js\");\r\n\r\nclass HttpsAgent extends HttpAgent {\r\n  constructor(options) {\r\n    super(options);\r\n\r\n    this.defaultPort = 443;\r\n    this.protocol = 'https:';\r\n    this.maxCachedSessions = this.options.maxCachedSessions;\r\n    /* istanbul ignore next */\r\n    if (this.maxCachedSessions === undefined) {\r\n      this.maxCachedSessions = 100;\r\n    }\r\n\r\n    this._sessionCache = {\r\n      map: {},\r\n      list: [],\r\n    };\r\n  }\r\n\r\n  createConnection(options, oncreate) {\r\n    const socket = this[CREATE_HTTPS_CONNECTION](options, oncreate);\r\n    this[INIT_SOCKET](socket, options);\r\n    return socket;\r\n  }\r\n}\r\n\r\n// https://github.com/nodejs/node/blob/master/lib/https.js#L89\r\nHttpsAgent.prototype[CREATE_HTTPS_CONNECTION] = OriginalHttpsAgent.prototype.createConnection;\r\n\r\n[\r\n  'getName',\r\n  '_getSession',\r\n  '_cacheSession',\r\n  // https://github.com/nodejs/node/pull/4982\r\n  '_evictSession',\r\n].forEach(function(method) {\r\n  /* istanbul ignore next */\r\n  if (typeof OriginalHttpsAgent.prototype[method] === 'function') {\r\n    HttpsAgent.prototype[method] = OriginalHttpsAgent.prototype[method];\r\n  }\r\n});\r\n\r\nmodule.exports = HttpsAgent;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYWdlbnRrZWVwYWxpdmUvbGliL2h0dHBzX2FnZW50LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSwyQkFBMkIsaURBQXNCO0FBQ2pELGtCQUFrQixtQkFBTyxDQUFDLGlFQUFTO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLEVBQUUsRUFBRSxtQkFBTyxDQUFDLHlFQUFhO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Z1c2lvbi1haS8uL25vZGVfbW9kdWxlcy9hZ2VudGtlZXBhbGl2ZS9saWIvaHR0cHNfYWdlbnQuanM/ZGMxMSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG5jb25zdCBPcmlnaW5hbEh0dHBzQWdlbnQgPSByZXF1aXJlKCdodHRwcycpLkFnZW50O1xyXG5jb25zdCBIdHRwQWdlbnQgPSByZXF1aXJlKCcuL2FnZW50Jyk7XHJcbmNvbnN0IHtcclxuICBJTklUX1NPQ0tFVCxcclxuICBDUkVBVEVfSFRUUFNfQ09OTkVDVElPTixcclxufSA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XHJcblxyXG5jbGFzcyBIdHRwc0FnZW50IGV4dGVuZHMgSHR0cEFnZW50IHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICBzdXBlcihvcHRpb25zKTtcclxuXHJcbiAgICB0aGlzLmRlZmF1bHRQb3J0ID0gNDQzO1xyXG4gICAgdGhpcy5wcm90b2NvbCA9ICdodHRwczonO1xyXG4gICAgdGhpcy5tYXhDYWNoZWRTZXNzaW9ucyA9IHRoaXMub3B0aW9ucy5tYXhDYWNoZWRTZXNzaW9ucztcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICBpZiAodGhpcy5tYXhDYWNoZWRTZXNzaW9ucyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMubWF4Q2FjaGVkU2Vzc2lvbnMgPSAxMDA7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fc2Vzc2lvbkNhY2hlID0ge1xyXG4gICAgICBtYXA6IHt9LFxyXG4gICAgICBsaXN0OiBbXSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjcmVhdGVDb25uZWN0aW9uKG9wdGlvbnMsIG9uY3JlYXRlKSB7XHJcbiAgICBjb25zdCBzb2NrZXQgPSB0aGlzW0NSRUFURV9IVFRQU19DT05ORUNUSU9OXShvcHRpb25zLCBvbmNyZWF0ZSk7XHJcbiAgICB0aGlzW0lOSVRfU09DS0VUXShzb2NrZXQsIG9wdGlvbnMpO1xyXG4gICAgcmV0dXJuIHNvY2tldDtcclxuICB9XHJcbn1cclxuXHJcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlanMvbm9kZS9ibG9iL21hc3Rlci9saWIvaHR0cHMuanMjTDg5XHJcbkh0dHBzQWdlbnQucHJvdG90eXBlW0NSRUFURV9IVFRQU19DT05ORUNUSU9OXSA9IE9yaWdpbmFsSHR0cHNBZ2VudC5wcm90b3R5cGUuY3JlYXRlQ29ubmVjdGlvbjtcclxuXHJcbltcclxuICAnZ2V0TmFtZScsXHJcbiAgJ19nZXRTZXNzaW9uJyxcclxuICAnX2NhY2hlU2Vzc2lvbicsXHJcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL3B1bGwvNDk4MlxyXG4gICdfZXZpY3RTZXNzaW9uJyxcclxuXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xyXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgaWYgKHR5cGVvZiBPcmlnaW5hbEh0dHBzQWdlbnQucHJvdG90eXBlW21ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgIEh0dHBzQWdlbnQucHJvdG90eXBlW21ldGhvZF0gPSBPcmlnaW5hbEh0dHBzQWdlbnQucHJvdG90eXBlW21ldGhvZF07XHJcbiAgfVxyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gSHR0cHNBZ2VudDtcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/agentkeepalive/lib/https_agent.js\n");

/***/ })

};
;